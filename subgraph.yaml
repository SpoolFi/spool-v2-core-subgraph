specVersion: 0.0.4
description: Spool V2 Core Subgraph
repository: 
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: StrategyRegistry
    network: mainnet
    source:
      address: '0xc1EeD9232A0A44c2463ACB83698c162966FBc78d'
      abi: StrategyRegistryContract
      startBlock: 17236369
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      file: ./src/strategyRegistry.ts
      entities:
        - Token
        - AssetGroup
        - Strategy
      abis:
        - name: StrategyRegistryContract
          file: ./abis/StrategyRegistry.json
        - name: StrategyContract
          file: ./abis/IStrategy.json
      eventHandlers:
        - event: StrategyRegistered(indexed address)
          handler: handleStrategyRegistered
        - event: StrategyApyUpdated(indexed address,int256)
          handler: handleStrategyApyUpdated
  - kind: ethereum/contract
    name: RiskManager
    network: mainnet
    source:
      address: '0x38628490c3043E5D0bbB26d5a0a62fC77342e9d5'
      abi: RiskManagerContract
      startBlock: 17236369
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      file: ./src/riskManager.ts
      entities:
        - Token
        - AssetGroup
        - Strategy
        - SmartVault
      abis:
        - name: RiskManagerContract
          file: ./abis/RiskManager.json
      eventHandlers:
        - event: RiskScoresUpdated(indexed address,address[],uint8[])
          handler: handleRiskScoresUpdated
        - event: AllocationProviderSet(indexed address,indexed address)
          handler: handleAllocationProviderSet
        - event: RiskProviderSet(indexed address,indexed address)
          handler: handleRiskProviderSet
        - event: RiskToleranceSet(indexed address,int8)
          handler: handleRiskToleranceSet
  - kind: ethereum/contract
    name: AssetGroupRegistry
    network: mainnet
    source:
      address: '0x245e77E56b1514D77910c9303e4b44dDb44B788c'
      abi: AssetGroupRegistryContract
      startBlock: 17236369
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      file: ./src/assetGroupRegistry.ts
      entities:
        - AssetGroup
        - AssetGroupToken
        - Token
      abis:
        - name: AssetGroupRegistryContract
          file: ./abis/AssetGroupRegistry.json
        - name: BTokenContract
          file: ./abis/BToken.json
        - name: BTokenBytesContract
          file: ./abis/BTokenBytes32.json
      eventHandlers:
        - event: AssetGroupRegistered(indexed uint256)
          handler: handleAssetGroupRegistered
  - kind: ethereum/contract
    name: SpoolAccessControl
    network: mainnet
    source:
      address: '0xC0BF43A4Ca27e0976195E6661b099742f10507e5'
      abi: SpoolAccessControlContract
      startBlock: 17236369
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      file: ./src/spoolAccessControl.ts
      entities:
        - RiskProvider
        - Strategy
        - StrategyRiskScore
      abis:
        - name: SpoolAccessControlContract
          file: ./abis/SpoolAccessControl.json
      eventHandlers:
        - event: RoleGranted(indexed bytes32,indexed address,indexed address)
          handler: handleRoleGranted
        - event: RoleRevoked(indexed bytes32,indexed address,indexed address)
          handler: handleRoleRevoked
  - kind: ethereum/contract
    name: SmartVaultManager
    network: mainnet
    source:
      address: '0xde79380FBd39e08150adAA5C6c9dE3146f53029e'
      abi: SmartVaultManagerContract
      startBlock: 17236369
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      file: ./src/smartVaultManager.ts
      entities:
        - SmartVault
        - AssetGroup
        - Strategy
        - RiskProvider
        - SmartVaultFees
        - SmartVaultStrategy
      abis:
        - name: SmartVaultManagerContract
          file: ./abis/SmartVaultManager.json
        - name: SmartVaultContract
          file: ./abis/SmartVault.json
      eventHandlers:
        - event: SmartVaultRegistered(indexed address,(uint256,address[],uint256,uint16,uint16,uint16))
          handler: handleSmartVaultRegistered
